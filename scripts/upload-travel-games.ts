import { createClient } from '@supabase/supabase-js';
import { config } from 'dotenv';

config({ path: '.env.local' });

const supabase = createClient(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!);

// 导入20个旅途游戏数据
const travelGames = [
  // 1. 窗外找色彩
  {
    id: 'travel-001',
    name: '窗外找色彩',
    age_range: '2-2.5',
    scene: 'travel',
    props: 'hands',
    focus: 'cognition',
    core_goal: '通过观察窗外移动的景色，训练孩子的视觉追踪能力和颜色认知，在旅途中保持专注和安静。',
    materials: '无需特殊道具，利用车窗外的自然景色。',
    steps: [
      '颜色启蒙（认知发展）：家长指着窗外一个明显的红色物体，清晰地说"红色"，让孩子跟着重复',
      '寻找游戏：引导孩子在窗外寻找其他红色的东西，每找到一个就用手指指出来',
      '颜色扩展（专注力训练）：当孩子熟悉红色后，逐渐加入蓝色、黄色等其他明显颜色',
      '互动总结：游戏结束时，和孩子一起回顾找到了哪些颜色，用手指数一数'
    ],
    duration: 5,
    difficulty: 1,
    activity_type: 'quiet',
    tips: [
      '选择合适时机：在车辆行驶较慢、景色变化适中的路段进行',
      '保持耐心温和：用温柔的声音和轻抚来重新吸引注意力',
      '安全第一：确保孩子安全坐在座椅上，不要影响驾驶安全',
      '适时休息：每次游戏3-5分钟即可，避免孩子视觉疲劳'
    ]
  },

  // 2. 小手拍拍节奏
  {
    id: 'travel-002',
    name: '小手拍拍节奏',
    age_range: '2-2.5',
    scene: 'travel',
    props: 'hands',
    focus: 'gross',
    core_goal: '通过简单的拍手节奏游戏，发展孩子的大肢体协调能力和音乐感知，同时释放旅途中的身体能量。',
    materials: '只需双手，可选择播放轻柔音乐。',
    steps: [
      '节奏引导（大肢体动作）：家长示范简单的拍手节奏"拍-拍-停"，让孩子观察',
      '模仿练习：鼓励孩子跟着家长一起拍手，从最简单的节奏开始',
      '音乐配合（音乐感知）：可以配合儿歌的节拍，如"两只老虎"的节奏拍手',
      '创意时间：让孩子尝试创造自己的拍手节奏，家长跟着模仿'
    ],
    duration: 6,
    difficulty: 1,
    activity_type: 'quiet',
    tips: [
      '控制音量：保持安静，不影响其他乘客或驾驶员',
      '简单重复：节奏要简单明了，便于2岁孩子理解和模仿',
      '积极鼓励：每次成功模仿都要给予热情的表扬',
      '灵活调整：根据孩子的兴趣和注意力随时调整节奏'
    ]
  },

  // 3. 简易涂鸦本
  {
    id: 'travel-003',
    name: '简易涂鸦本',
    age_range: '2-2.5',
    scene: 'travel',
    props: 'paper',
    focus: 'fine',
    core_goal: '通过自由涂鸦活动，锻炼手部精细动作控制能力，培养创造力和专注力，为将来的书写做准备。',
    materials: '白纸或涂鸦本，2-3支粗头安全彩笔，湿巾。',
    steps: [
      '准备工作（精细动作）：帮助孩子选择喜欢的彩笔，教他正确的握笔姿势',
      '自由创作：让孩子在纸上自由涂鸦，不限制内容和形式',
      '互动交流（语言发展）：适时询问"这是什么？"引导孩子表达想法',
      '作品展示：完成后一起欣赏作品，给予肯定和鼓励'
    ],
    duration: 10,
    difficulty: 2,
    activity_type: 'quiet',
    tips: [
      '安全选择：使用粗头、可水洗的彩笔，避免弄脏衣物',
      '准备充分：随时准备湿巾清洁小手和意外污渍',
      '自由创作：不要过度指导，让孩子自由发挥想象力',
      '固定纸张：可以准备小夹子固定纸张，防止滑动'
    ]
  },

  // 4. 神奇触摸袋
  {
    id: 'travel-004',
    name: '神奇触摸袋',
    age_range: '2-2.5',
    scene: 'travel',
    props: 'household',
    focus: 'cognition',
    core_goal: '通过触觉感知游戏，提升孩子的感官认知能力和专注力，学习用触摸来识别不同的物品特征。',
    materials: '不透明小袋子，3-4个安全小物品（如钥匙、小瓶子、软球等）。',
    steps: [
      '物品展示（认知发展）：先让孩子看看要放入袋子的物品，说出它们的名字',
      '装袋游戏：将物品放入袋子，让孩子观看整个过程',
      '触摸猜测（感官发展）：让孩子伸手摸一个物品，引导他描述触感',
      '验证惊喜：取出物品验证，猜对了就给予热烈的表扬'
    ],
    duration: 8,
    difficulty: 2,
    activity_type: 'quiet',
    tips: [
      '安全第一：确保所有物品都是圆滑无尖角、无小零件的',
      '循序渐进：从形状差异明显的物品开始，逐渐增加难度',
      '耐心引导：如果孩子猜不出，可以给予提示',
      '控制数量：根据孩子注意力调整物品数量，避免过多'
    ]
  },

  // 5. 图书卡片配对
  {
    id: 'travel-005',
    name: '图书卡片配对',
    age_range: '2-2.5',
    scene: 'travel',
    props: 'books_pictures',
    focus: 'cognition',
    core_goal: '通过简单的图片识别和配对活动，发展视觉识别能力和记忆力，为将来的阅读和学习打基础。',
    materials: '4-6张大尺寸图片卡片（动物、水果等），同样内容的小书。',
    steps: [
      '图片认识（认知发展）：和孩子一起看图片卡片，说出每个图案的名字',
      '翻书寻找：在小书中寻找与卡片相同的图案',
      '配对游戏（记忆训练）：将卡片和书中的图案进行配对',
      '故事延伸：用配对成功的图片编一个简单的小故事'
    ],
    duration: 12,
    difficulty: 2,
    activity_type: 'quiet',
    tips: [
      '图片清晰：选择色彩鲜艳、图案简单清晰的图片',
      '逐步增加：从2-3张卡片开始，根据孩子能力逐渐增加',
      '积极互动：在配对过程中多用鼓励性语言',
      '灵活调整：如果孩子感到困难，可以减少卡片数量'
    ]
  },

  // 6. 手指小剧场
  {
    id: 'travel-006',
    name: '手指小剧场',
    age_range: '2.5-3',
    scene: 'travel',
    props: 'hands',
    focus: 'language',
    core_goal: '通过手指游戏和角色扮演，发展语言表达能力和想象力，在旅途中保持专注并促进亲子互动。',
    materials: '双手，可选择性地准备简单的手指偶。',
    steps: [
      '角色介绍（语言发展）：用手指做兔子耳朵，说"小兔子蹦蹦跳"，让孩子观察',
      '模仿表演：鼓励孩子模仿手势和语言，学会基本的手指动作',
      '创意扩展（想象力发展）：逐渐加入小鸟、小猫等更多动物角色',
      '互动故事：让孩子选择最喜欢的角色，一起编一个短小的故事'
    ],
    duration: 10,
    difficulty: 2,
    activity_type: 'quiet',
    tips: [
      '动作简单：手势要简单明了，便于孩子理解和模仿',
      '表情生动：配合生动的表情和语调增加趣味性',
      '鼓励创新：支持孩子创造新的手指角色和动作',
      '音量控制：保持适当音量，维护安静的旅行环境'
    ]
  },

  // 7. 数字小火车
  {
    id: 'travel-007',
    name: '数字小火车',
    age_range: '2.5-3',
    scene: 'travel',
    props: 'hands',
    focus: 'cognition',
    core_goal: '通过观察和计数游戏，培养基础数学概念和逻辑思维能力，提升专注力和观察力。',
    materials: '无需道具，利用窗外景色和手指。',
    steps: [
      '数字启蒙（数学发展）：让孩子数窗外经过的汽车，从1开始数到3',
      '手指辅助：用手指帮助计数，每看到一辆车就伸出一根手指',
      '分类计数（逻辑思维）：区分不同颜色的车辆进行计数，如"红色车2辆"',
      '数字回顾：游戏结束时回顾总共数了多少辆车，用手指表示'
    ],
    duration: 8,
    difficulty: 3,
    activity_type: 'quiet',
    tips: [
      '从小数字开始：先从1-3的数字开始，避免孩子感到困难',
      '实物结合：始终结合具体物品进行计数，增强理解',
      '耐心引导：如果孩子数错了，温和地重新开始',
      '灵活变通：如果车辆太少，可以改数其他物品如房子、树等'
    ]
  },

  // 8. 折纸小工艺
  {
    id: 'travel-008',
    name: '折纸小工艺',
    age_range: '2.5-3',
    scene: 'travel',
    props: 'paper',
    focus: 'fine',
    core_goal: '通过简单的折纸活动，锻炼手部精细动作和空间思维能力，培养耐心和专注力。',
    materials: '彩色纸张4-5张，简单的折纸图例。',
    steps: [
      '材料准备（精细动作）：让孩子选择喜欢的彩纸颜色，感受纸张的质感',
      '基础折叠：示范最简单的对折动作，让孩子跟着做',
      '形状创造（空间思维）：协助孩子完成简单的三角形、正方形折纸',
      '作品展示：一起欣赏完成的折纸作品，给孩子成就感'
    ],
    duration: 15,
    difficulty: 3,
    activity_type: 'quiet',
    tips: [
      '选择合适的纸：使用中等厚度的彩纸，既好折又不易破',
      '耐心示范：每个步骤都要慢慢示范，让孩子充分理解',
      '适度帮助：在孩子遇到困难时给予适当帮助，保持成功体验',
      '保存作品：可以将作品保存起来，增强孩子的成就感'
    ]
  },

  // 9. 神奇变形盒
  {
    id: 'travel-009',
    name: '神奇变形盒',
    age_range: '2.5-3',
    scene: 'travel',
    props: 'household',
    focus: 'cognition',
    core_goal: '通过物品的不同用途探索，发展创造性思维和问题解决能力，培养观察力和想象力。',
    materials: '一个小盒子，几个安全的家居小物品（勺子、小杯子等）。',
    steps: [
      '物品探索（认知发展）：拿出一个勺子，问孩子"这是什么？用来做什么？"',
      '用途拓展：引导孩子想象勺子的其他用途，如"小船"、"电话"等',
      '角色扮演（想象力发展）：用物品进行简单的角色扮演游戏',
      '创意总结：回顾一个物品有多少种"变身"，培养发散思维'
    ],
    duration: 12,
    difficulty: 3,
    activity_type: 'quiet',
    tips: [
      '安全选择：确保所有物品都是安全、无尖锐边缘的',
      '开放引导：用开放性问题引导，如"还可以当什么？"',
      '积极回应：对孩子的每个想法都给予积极回应',
      '控制节奏：根据孩子的兴趣控制游戏节奏'
    ]
  },

  // 10. 故事图片书
  {
    id: 'travel-010',
    name: '故事图片书',
    age_range: '2.5-3',
    scene: 'travel',
    props: 'books_pictures',
    focus: 'language',
    core_goal: '通过看图讲故事活动，发展语言表达能力和想象力，培养阅读兴趣和理解能力。',
    materials: '图画书1-2本，彩色图片卡片。',
    steps: [
      '图片观察（语言发展）：打开图画书，让孩子仔细观察图片内容',
      '提问引导：用简单问题引导，如"图片里有什么？""他们在做什么？"',
      '故事创编（想象力发展）：鼓励孩子用自己的话描述图片',
      '情节连接：帮助孩子将几幅图片连成一个简单的故事'
    ],
    duration: 15,
    difficulty: 3,
    activity_type: 'quiet',
    tips: [
      '选择合适内容：图片内容要简单明了，适合孩子理解',
      '耐心倾听：认真听取孩子的描述，不要急于纠正',
      '适当提示：如果孩子卡住了，给予适当的提示',
      '鼓励表达：多用"真棒！""还有呢？"等鼓励性语言'
    ]
  },

  // 11. 窗外建筑师
  {
    id: 'travel-011',
    name: '窗外建筑师',
    age_range: '3-4',
    scene: 'travel',
    props: 'hands',
    focus: 'cognition',
    core_goal: '通过观察和识别不同建筑，发展观察能力和分类思维，培养对环境的认知和空间概念。',
    materials: '无需道具，利用窗外建筑景观。',
    steps: [
      '建筑识别（认知发展）：指着窗外的高楼说"这是高楼"，让孩子跟着说',
      '形状分类：观察建筑的不同形状，如方形、圆形建筑',
      '特征观察（观察能力）：注意建筑的特别之处，如颜色、大小、用途',
      '数量统计：一起数一数看到了多少座高楼、多少间小房子'
    ],
    duration: 10,
    difficulty: 3,
    activity_type: 'quiet',
    tips: [
      '简化描述：用简单的词汇描述建筑特征',
      '互动问答：多问"你觉得这是什么？""这个建筑是做什么的？"',
      '耐心解释：对孩子的问题耐心回答，激发探索兴趣',
      '安全提醒：提醒孩子不要将身体探出窗外'
    ]
  },

  // 12. 节奏大师
  {
    id: 'travel-012',
    name: '节奏大师',
    age_range: '3-4',
    scene: 'travel',
    props: 'hands',
    focus: 'gross',
    core_goal: '通过复杂的节奏游戏，发展音乐感知能力和大肢体协调性，培养专注力和记忆力。',
    materials: '双手，可选择播放儿童音乐。',
    steps: [
      '基础节奏（大肢体发展）：示范"拍-拍-停-拍"的节奏，让孩子跟着做',
      '节奏进阶：增加复杂度，如"拍-拍-拍手-停"',
      '音乐配合（音乐感知）：配合熟悉的儿歌节拍进行拍手',
      '创作时间：鼓励孩子创造自己的节奏，家长跟着学习'
    ],
    duration: 12,
    difficulty: 4,
    activity_type: 'quiet',
    tips: [
      '循序渐进：从简单节奏开始，逐渐增加复杂度',
      '多重感官：结合听觉和触觉，增强节奏感知',
      '积极鼓励：对孩子的创新给予热情的鼓励',
      '控制音量：保持合适的音量，不影响他人'
    ]
  },

  // 13. 故事接龙画
  {
    id: 'travel-013',
    name: '故事接龙画',
    age_range: '3-4',
    scene: 'travel',
    props: 'paper',
    focus: 'language',
    core_goal: '结合绘画和语言表达，发展创造力和叙述能力，培养想象力和艺术表现力。',
    materials: '纸张、彩笔、简单贴纸或印章。',
    steps: [
      '起始图形（创造力发展）：家长在纸上画一个简单图形，如圆圈',
      '想象扩展：问孩子"这可以是什么？"鼓励发挥想象',
      '共同创作（语言发展）：根据孩子的想法继续添加元素',
      '故事编织：一起编一个关于这幅画的小故事'
    ],
    duration: 20,
    difficulty: 4,
    activity_type: 'quiet',
    tips: [
      '开放思维：从简单图形开始，激发无限想象力',
      '耐心倾听：认真听取孩子的想法，不要急于指正',
      '材料丰富：可以用贴纸等材料增加趣味性',
      '记录作品：可以将故事和画作一起保存下来'
    ]
  },

  // 14. 魔法收纳盒
  {
    id: 'travel-014',
    name: '魔法收纳盒',
    age_range: '3-4',
    scene: 'travel',
    props: 'household',
    focus: 'cognition',
    core_goal: '通过分类和整理活动，发展逻辑思维和组织能力，培养秩序感和专注力。',
    materials: '一个小盒子，不同类型的安全小物品（按钮、硬币、小玩具等）。',
    steps: [
      '物品分散（认知发展）：将所有小物品混合在一起',
      '分类规则：教孩子按照颜色、大小或材质进行分类',
      '动手整理（逻辑思维）：让孩子动手将物品分类放好',
      '检查总结：一起检查分类结果，讨论分类的原因'
    ],
    duration: 15,
    difficulty: 4,
    activity_type: 'quiet',
    tips: [
      '安全第一：确保所有物品都是安全的，无吞咽风险',
      '分类明确：选择特征明显的物品，便于分类',
      '鼓励思考：多问"为什么这样分？""还可以怎么分？"',
      '灵活调整：根据孩子能力调整分类难度'
    ]
  },

  // 15. 立体故事屋
  {
    id: 'travel-015',
    name: '立体故事屋',
    age_range: '3-4',
    scene: 'travel',
    props: 'books_pictures',
    focus: 'language',
    core_goal: '通过立体书和图片卡片，发展阅读理解能力和语言表达能力，培养想象力和逻辑思维。',
    materials: '立体书或翻翻书，相关主题的图片卡片。',
    steps: [
      '书籍探索（阅读发展）：一起翻开立体书，观察立体效果',
      '情节理解：引导孩子理解故事情节，提问"发生了什么？"',
      '角色扮演（语言发展）：用图片卡片角色进行简单表演',
      '故事续编：鼓励孩子想象故事的后续发展'
    ],
    duration: 18,
    difficulty: 4,
    activity_type: 'quiet',
    tips: [
      '内容适宜：选择适合3-4岁孩子理解的故事内容',
      '互动阅读：在阅读过程中多与孩子互动交流',
      '保护书籍：教孩子爱护书籍，轻轻翻页',
      '扩展思考：用开放性问题引导孩子思考'
    ]
  },

  // 16. 旅行小记者
  {
    id: 'travel-016',
    name: '旅行小记者',
    age_range: '3-4',
    scene: 'travel',
    props: 'paper',
    focus: 'language',
    core_goal: '通过记录和描述旅途见闻，发展观察能力和语言表达能力，培养记录习惯和逻辑思维。',
    materials: '小本子、彩笔、贴纸。',
    steps: [
      '观察记录（观察能力）：让孩子观察窗外景色，选择印象深刻的事物',
      '绘画记录：用简单的图画记录看到的东西',
      '语言描述（语言发展）：鼓励孩子用语言描述所画的内容',
      '日记整理：将画作和描述整理成简单的"旅行日记"'
    ],
    duration: 25,
    difficulty: 4,
    activity_type: 'quiet',
    tips: [
      '鼓励表达：对孩子的每个观察都给予积极回应',
      '记录方式灵活：可以用画画、贴纸等多种方式记录',
      '培养习惯：养成观察和记录的好习惯',
      '保存作品：将"旅行日记"保存作为美好回忆'
    ]
  },

  // 17. 音乐创作家
  {
    id: 'travel-017',
    name: '音乐创作家',
    age_range: '2.5-3',
    scene: 'travel',
    props: 'household',
    focus: 'gross',
    core_goal: '利用简单器具创造音乐，发展音乐感知能力和创造力，培养节奏感和听觉敏感性。',
    materials: '塑料杯、勺子、小瓶子等可以发声的安全物品。',
    steps: [
      '声音探索（音乐发展）：让孩子用勺子轻敲塑料杯，听听声音',
      '节奏创作：尝试创造不同的敲击节奏',
      '音乐配合（节奏感发展）：配合熟悉的儿歌节拍进行演奏',
      '合奏时间：家长和孩子一起进行简单的"合奏"'
    ],
    duration: 12,
    difficulty: 3,
    activity_type: 'quiet',
    tips: [
      '音量控制：提醒孩子轻轻敲击，控制音量',
      '安全材料：确保所有器具都是安全、不易破损的',
      '节奏引导：从简单节奏开始，逐渐增加复杂度',
      '创意鼓励：鼓励孩子尝试不同的敲击方式'
    ]
  },

  // 18. 形状大发现
  {
    id: 'travel-018',
    name: '形状大发现',
    age_range: '2.5-3',
    scene: 'travel',
    props: 'hands',
    focus: 'cognition',
    core_goal: '通过识别窗外物体的形状，发展几何认知能力和观察力，培养分类思维和空间概念。',
    materials: '无需道具，利用窗外景观。',
    steps: [
      '形状启蒙（几何认知）：指着圆形的车轮说"圆形"，让孩子跟着说',
      '形状寻找：在窗外寻找更多的圆形物体，如太阳、标志牌等',
      '形状对比（空间概念）：引入方形，如建筑物的窗户、车门等',
      '形状总结：回顾找到了多少个圆形、多少个方形'
    ],
    duration: 8,
    difficulty: 3,
    activity_type: 'quiet',
    tips: [
      '形状清晰：选择形状特征明显的物体进行识别',
      '生活化教学：结合生活中常见的物品进行教学',
      '反复练习：通过多次重复加深形状概念',
      '扩展学习：逐渐加入三角形等其他基本形状'
    ]
  },

  // 19. 精细手工坊
  {
    id: 'travel-019',
    name: '精细手工坊',
    age_range: '3-4',
    scene: 'travel',
    props: 'paper',
    focus: 'fine',
    core_goal: '通过撕纸和粘贴活动，发展手部精细动作和手眼协调能力，培养耐心和专注力。',
    materials: '彩色纸张、安全胶棒、白纸底板。',
    steps: [
      '撕纸练习（精细动作）：教孩子用拇指和食指撕出小纸片',
      '形状创作：引导孩子撕出不同大小的纸片',
      '粘贴设计（手眼协调）：将纸片粘贴在底板上，创作图案',
      '作品完善：一起为作品添加细节，完成艺术创作'
    ],
    duration: 20,
    difficulty: 4,
    activity_type: 'quiet',
    tips: [
      '动作示范：仔细示范正确的撕纸手法',
      '安全胶棒：使用儿童专用的安全胶棒',
      '创意自由：不限制孩子的创作内容和形式',
      '耐心指导：对于精细动作给予耐心的指导和帮助'
    ]
  },

  // 20. 综合小剧场
  {
    id: 'travel-020',
    name: '综合小剧场',
    age_range: '3-4',
    scene: 'travel',
    props: 'books_pictures',
    focus: 'social',
    core_goal: '通过角色扮演和故事表演，发展社交情感能力和表达能力，培养自信心和创造力。',
    materials: '故事书、角色图片卡片、简单道具（如小帽子）。',
    steps: [
      '角色选择（社交发展）：让孩子从故事中选择喜欢的角色',
      '情节理解：一起回顾故事情节，理解角色特点',
      '角色表演（情感表达）：鼓励孩子模仿角色的动作和语言',
      '互动演出：家长和孩子一起进行简单的角色扮演'
    ],
    duration: 22,
    difficulty: 5,
    activity_type: 'quiet',
    tips: [
      '角色简单：选择性格特点明显、易于理解的角色',
      '鼓励表达：支持孩子大胆表现，不要过分追求完美',
      '互动参与：家长积极参与，营造轻松愉快的氛围',
      '情感引导：通过角色扮演引导孩子理解不同情感'
    ]
  }
];

async function uploadTravelGames() {
  console.log('开始上传20个旅途游戏到数据库...');
  
  let successCount = 0;
  let errorCount = 0;
  
  for (const game of travelGames) {
    try {
      const { error } = await supabase
        .from('games')
        .insert([game]);
      
      if (error) {
        console.error(`❌ 添加游戏 ${game.name} 失败:`, error.message);
        errorCount++;
      } else {
        console.log(`✅ 成功添加游戏: ${game.name}`);
        successCount++;
      }
    } catch (err) {
      console.error(`❌ 添加游戏 ${game.name} 异常:`, err);
      errorCount++;
    }
  }
  
  console.log(`\n上传完成！成功: ${successCount}个，失败: ${errorCount}个`);
  
  // 验证上传结果
  const { count } = await supabase
    .from('games')
    .select('*', { count: 'exact' })
    .eq('scene', 'travel');
    
  console.log(`数据库中旅途场景游戏总数: ${count}个`);
}

uploadTravelGames().catch(console.error);